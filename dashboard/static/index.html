<!doctype html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
    <meta name="theme-color" content="#0b0f14" />
    <title>CapyFlix Monitoring</title>
    <link rel="stylesheet" href="/static/styles.css" />
  </head>
  <body>
    <div class="app">
      <header>
        <div class="title">
          <div class="titleRow">
            <h1>CapyFlix Monitoring</h1>
            <div class="clock clockInline" aria-label="Horloge">
              <div class="time" id="clockTime">--:--</div>
              <div id="clockDate">—</div>
            </div>
          </div>
          <div class="sub">
            <button id="servicesBtn" class="pill pillBtn" type="button" aria-label="Voir l'état des services">
              <span id="statusDot" class="dot"></span>
              <span id="statusText">Chargement…</span>
            </button>
            <div class="pill">
              <span>Auto-refresh</span>
              <strong id="refreshLabel">—</strong>
            </div>
            <div id="scanLine" class="pill scanPill" aria-label="Dernier scan Sonarr/Radarr">Scan: —</div>
          </div>
        </div>

        <div class="headerRight">
          <button id="menuBtn" class="iconBtn" aria-label="Menu">
            <span class="icon">☰</span>
          </button>
          <button id="weatherPill" class="pill pillBtn weatherPill" type="button" aria-label="Voir la météo détaillée">
            <span id="weatherIcon" class="weatherIcon">—</span>
            <strong id="weatherTemp">—</strong>
            <span id="weatherLabel" class="weatherLabel"></span>
          </button>
        </div>
      </header>

      <div class="grid">
        <section class="card sonarr">
          <h2>Prochains épisodes (Sonarr)</h2>
          <div id="sonarrList" class="list"></div>
        </section>

        <section class="card radarr-upcoming">
          <h2>Films bientôt téléchargés (Radarr)</h2>
          <div id="radarrUpcomingList" class="list"></div>
        </section>

        <section class="card qb">
          <h2>Téléchargements (qBittorrent)</h2>
          <div id="qbList" class="list"></div>
        </section>

        <section class="card jelly">
          <h2>Derniers ajouts (Jellyfin)</h2>
          <div id="jellyList" class="media-grid"></div>
        </section>

        <section class="card system">
          <h2>Système</h2>
          <div id="systemStats" class="system-grid"></div>
        </section>

        <section class="card library">
          <h2>Ajouté aujourd’hui</h2>
          <div id="libraryToday" class="list"></div>
        </section>
      </div>
    </div>

    <div id="menuOverlay" class="overlay hidden" aria-hidden="true"></div>
    <aside id="menuPanel" class="panel hidden" aria-hidden="true">
      <div class="panelHeader">
        <div class="panelTitle">Accès rapide</div>
        <button id="menuCloseBtn" class="iconBtn" aria-label="Fermer">
          <span class="icon">✕</span>
        </button>
      </div>
      <div id="links" class="link-grid panelLinks"></div>
    </aside>

    <div id="servicesOverlay" class="overlay modalOverlay hidden" aria-hidden="true"></div>
    <div id="servicesModal" class="modal hidden" aria-hidden="true" role="dialog" aria-modal="true" aria-label="État des services">
      <div class="modalHeader">
        <div class="modalTitle">État des services</div>
        <button id="servicesCloseBtn" class="iconBtn" aria-label="Fermer" type="button">
          <span class="icon">✕</span>
        </button>
      </div>
      <div id="servicesList" class="modalList"></div>
    </div>

    <div id="legendOverlay" class="overlay modalOverlay hidden" aria-hidden="true"></div>
    <div id="legendModal" class="modal hidden" aria-hidden="true" role="dialog" aria-modal="true" aria-label="Légende">
      <div class="modalHeader">
        <div class="modalTitle">Légende</div>
        <button id="legendCloseBtn" class="iconBtn" aria-label="Fermer" type="button">
          <span class="icon">✕</span>
        </button>
      </div>
      <div id="legendList" class="modalList"></div>
    </div>

    <div id="weatherOverlay" class="overlay modalOverlay hidden" aria-hidden="true"></div>
    <div id="weatherModal" class="modal hidden" aria-hidden="true" role="dialog" aria-modal="true" aria-label="Météo détaillée">
      <div class="modalHeader">
        <div id="weatherModalTitle" class="modalTitle">Météo</div>
        <button id="weatherCloseBtn" class="iconBtn" aria-label="Fermer" type="button">
          <span class="icon">✕</span>
        </button>
      </div>
      <div id="weatherContent" class="modalList"></div>
    </div>

    <script src="/static/app.js"></script>
  </body>
</html>
